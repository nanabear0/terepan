<div class="root">
  <p-fieldset legend="Import">
    <form class="input-fields" [formGroup]="importForm" (ngSubmit)="validate()">
      <textarea pTextarea id="input" formControlName="input" class="textarea"></textarea>
      <p-fileupload
        mode="basic"
        chooseLabel="Upload json"
        accept="application/json"
        maxFileSize="1000000"
        (onSelect)="onUpload($event)"
      />
      <div class="actions">
        <p-button label="Validate input" type="submit" [disabled]="!importForm.valid" />
        @if(parsedArtistsAsList().length) {<p-button label="Import" (onClick)="import()" />}
      </div>
    </form>
  </p-fieldset>
  @if (allArtistsAlreadyAdded()) {
  <p-message severity="info">All artists already followed</p-message>
  } @else if (parsedArtistsAsList().length){
  <p-fieldset
    legend="Following artists will be imported"
    class="table-container heightFixedFieldset"
  >
    <app-artist-list [value]="parsedArtistsAsList()" [noAction]="true"></app-artist-list>
  </p-fieldset>
  }
</div>
<p-toast position="bottom-right"></p-toast>
